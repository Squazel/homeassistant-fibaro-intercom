# Project Structure & Documentation

## 📁 Repository Structure

```
homeassistant-fibaro-intercom/
├── custom_components/fibaro_intercom/    # Integration code
│   ├── __init__.py                      # Entry point
│   ├── manifest.json                    # Integration metadata
│   ├── const.py                         # Constants
│   ├── config_flow.py                   # UI configuration
│   ├── coordinator.py                   # HA data coordinator
│   ├── client.py                        # Standalone WebSocket client
│   ├── binary_sensor.py                 # Connection & doorbell sensors
│   ├── switch.py                        # Relay switches
│   ├── camera.py                        # Camera integration
│   └── services.yaml                    # Service definitions
├── tests/                               # Test suite
│   ├── test_client.py                   # Client tests (11 tests, 69% coverage)
│   ├── test_connection.py               # Manual connection testing script
│   ├── conftest.py                      # Test fixtures
│   ├── coverage.xml                     # Coverage report (gitignored)
│   └── README.md                        # Development guide
├── .github/workflows/                   # CI/CD automation
│   ├── tests.yml                        # Test pipeline
│   ├── hacs.yml                         # HACS validation
│   ├── hassfest.yml                     # HA validation
│   └── codeql.yml                       # Security scanning
├── README.md                            # Main documentation
├── DESCRIPTION.md                       # HACS description
├── pyproject.toml                       # Project config & dev dependencies
├── hass-dev.py                          # Development CLI tool
├── tools/                               # Development tools
│   └── commands.py                      # Centralized dev commands
├── LICENSE                              # MIT license
└── .gitignore                           # Git exclusions
```

## 📚 Documentation Locations

### User Documentation
- **`README.md`**: Complete user guide
  - Installation (HACS + manual)
  - Configuration via UI
  - Usage examples
  - API reference
  - Troubleshooting

- **`DESCRIPTION.md`**: HACS marketplace description
  - Feature highlights
  - Quick setup guide
  - Requirements

### Developer Documentation
- **`tests/README.md`**: Development guide
  - Setup instructions
  - Architecture overview
  - Testing procedures
  - Code quality tools
  - Contributing guidelines

- **`.github/WORKFLOWS.md`**: CI/CD documentation
  - Workflow descriptions
  - Quality gates
  - Release process

## 🧪 Testing & Coverage

- **Location**: `tests/` directory
- **Framework**: pytest with asyncio support
- **Coverage**: 69% (154 statements, 48 missed)
- **Files**:
  - `coverage.xml` - XML coverage report (generated by running tests with coverage, excluded from git)
    - To regenerate: run `pytest --cov=custom_components.fibaro_intercom --cov-report=xml`
  - `htmlcov/` - HTML coverage report (for local viewing)
  - `__pycache__/` - Compiled bytecode (gitignored)

## 🔧 Development Workflow

1. **Setup**: `python hass-dev.py setup`
2. **Code**: Edit files in `custom_components/fibaro_intercom/`
3. **Quick Check**: `python hass-dev.py quality` (format + lint, no tests)
4. **Test**: `python hass-dev.py test` (run tests only)
5. **Full Check**: `python hass-dev.py check` (everything before committing)
6. **Coverage**: See `tests/htmlcov/index.html` after running tests

**Modern Stack**: All tools use centralized `tools/commands.py` for consistency

## 🚀 CI/CD Pipeline

- **Tests**: Python 3.11, 3.12, 3.13 matrix
- **Quality**: black, isort, flake8, mypy
- **Validation**: HACS + hassfest
- **Security**: CodeQL scanning
- **Coverage**: Automatic upload to Codecov

All documentation is consolidated into these key files to avoid duplication and maintenance overhead.
